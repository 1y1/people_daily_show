"use strict";(self["webpackChunkpeople_daily"]=self["webpackChunkpeople_daily"]||[]).push([[443],{239:function(e,t,a){a.r(t),a.d(t,{default:function(){return V}});var i=a(3396),n=a(7139);const l=e=>((0,i.dD)("data-v-5a9225b9"),e=e(),(0,i.Cn)(),e),o={class:"wrap"},r=["src"],s={class:"top"},c=["src"],d={class:"operate"},u=["src"],h={class:"title"},g={class:"operateBtn"},p=l((()=>(0,i._)("use",{"xlink:href":"#icon-shangyishou"},null,-1))),f=[p],v=["xlink:href"],m=l((()=>(0,i._)("use",{"xlink:href":"#icon-xiayishou"},null,-1))),_=[m],y={class:"progress"},D={class:"timeText"},k=["innerHTML"];function x(e,t,a,l,p,m){const x=(0,i.up)("navBar"),w=(0,i.up)("progressCom");return(0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(x),(0,i._)("audio",{onCanplay:t[0]||(t[0]=(...t)=>e.getDuration&&e.getDuration(...t)),onTimeupdate:t[1]||(t[1]=(...t)=>e.updateTime&&e.updateTime(...t)),onEnded:t[2]||(t[2]=(...t)=>e.audioEnd&&e.audioEnd(...t)),ref:"audio",src:e.articleDetail.playPath,autoplay:""},null,40,r),(0,i._)("div",s,[(0,i._)("img",{class:"bg",src:"https://imagev2.xmcdn.com/"+e.articleDetail.cover,alt:""},null,8,c),(0,i._)("div",d,[(0,i._)("img",{src:"https://imagev2.xmcdn.com/"+e.articleDetail.cover,alt:""},null,8,u),(0,i._)("h2",h,(0,n.zw)(e.articleDetail.title),1),(0,i._)("div",g,[((0,i.wg)(),(0,i.iD)("svg",{class:(0,n.C_)(["icon",{gray:0==e.index}]),"aria-hidden":"true",onClick:t[3]||(t[3]=t=>e.switchAudio("prev"))},f,2)),((0,i.wg)(),(0,i.iD)("svg",{class:"icon play","aria-hidden":"true",onClick:t[4]||(t[4]=(...t)=>e.play&&e.play(...t))},[(0,i._)("use",{"xlink:href":e.playFlag?"#icon-zanting":"#icon-bofang"},null,8,v)])),((0,i.wg)(),(0,i.iD)("svg",{class:(0,n.C_)(["icon",{gray:e.index==e.audioList.length-1}]),"aria-hidden":"true",onClick:t[5]||(t[5]=t=>e.switchAudio("next"))},_,2))]),(0,i._)("div",y,[(0,i.Wm)(w,{onChange:e.changeProgress,percentage:e.percentage},null,8,["onChange","percentage"]),(0,i._)("div",D,[(0,i._)("span",null,(0,n.zw)(e.currentTime),1),(0,i._)("span",null,(0,n.zw)(e.duration),1)])])])]),(0,i._)("div",{class:"content",innerHTML:e.articleDetail.content},null,8,k)])}var w=a(4870),C=a(678);const b=e=>((0,i.dD)("data-v-5fbfd7cb"),e=e(),(0,i.Cn)(),e),T={class:"navBar"},I=b((()=>(0,i._)("h2",null,"详情",-1)));function M(e,t,a,n,l,o){return(0,i.wg)(),(0,i.iD)("div",T,[(0,i._)("span",{class:"arrowLeft",onClick:t[0]||(t[0]=(...t)=>e.goBack&&e.goBack(...t))}),I])}var F=(0,i.aZ)({methods:{goBack(){console.log("houtui"),this.$router.go(-1)}}}),L=a(89);const $=(0,L.Z)(F,[["render",M],["__scopeId","data-v-5fbfd7cb"]]);var B=$,W=a(9242);const Z=e=>((0,i.dD)("data-v-6ef6d8da"),e=e(),(0,i.Cn)(),e),A=Z((()=>(0,i._)("div",{class:"point"},null,-1))),P=[A];function E(e,t,a,l,o,r){return(0,i.wg)(),(0,i.iD)("div",{class:"progressWrap",ref:"progressWrap",onClick:t[1]||(t[1]=(0,W.iM)((t=>e.change(t)),["self"]))},[(0,i._)("div",{class:"posses",style:(0,n.j5)({width:e.percentage+"%"}),onClick:t[0]||(t[0]=(0,W.iM)((t=>e.change(t)),["self"]))},P,4)],512)}var z=(0,i.aZ)({props:{percentage:{type:Number,default:0}},methods:{change(e){console.log("出发了change");let t=this.$refs.progressWrap;console.log("width",t.clientWidth),console.log("e",e);let a=e.offsetX/t.clientWidth*100;this.$emit("change",a)}}});const R=(0,L.Z)(z,[["render",E],["__scopeId","data-v-6ef6d8da"]]);var j=R,H=a(7750),N=(0,i.aZ)({components:{navBar:B,progressCom:j},setup(){const e=(0,C.tv)();let t=(0,w.iH)(Number(e.currentRoute.value.params.index)),a=(0,w.qj)({title:"",playPath:"",cover:"",content:""});function n(e){H.Z.getAudioDetail("/"+e).then((e=>{a.title=e.data.trackDetailInfo.trackInfo.title,a.playPath=e.data.trackDetailInfo.trackInfo.playPath,a.cover=e.data.trackDetailInfo.trackInfo.cover,a.content=l(e.data.trackRichInfo.richIntro)})).catch((e=>{console.log(e)}))}function l(e){e=e.replaceAll(/(<br>(\s)*)+/g,"<br>"),e=e.replaceAll(/\d(<br>)/g,"");let t=e.split("<br>"),a="";return t.forEach((e=>{e.length>20?a+="<p>"+e+"</p>":a+="<h2>"+e+"</h2>"})),a}console.log(e.currentRoute),n(e.currentRoute.value.params.id);const o=(0,i.f3)("audioList");return{index:t,articleDetail:a,audioList:o,getDetail:n}},data(){return{percentage:0,duration:"00:00",currentTime:"00:00",playFlag:!0}},mounted(){console.log("sdfj"),console.log(this.$refs.audio)},methods:{getDuration(){let e=this.$refs.audio;console.log(e.duration);let t=e.duration,a=Math.floor(t/60)+"",i=Math.floor(t%60)+"";a=a.length>=2?a:"0"+a,i=i.length>=2?i:"0"+i,this.duration=a+":"+i},updateTime(e){let t=this.$refs.audio;console.log(t.duration);let a=e.target.currentTime;this.percentage=a/t.duration*100;let i=Math.floor(a/60)+"",n=Math.floor(a%60)+"";i=i.length>=2?i:"0"+i,n=n.length>=2?n:"0"+n,this.currentTime=i+":"+n},changeProgress(e){console.log("possesValue.value",e),this.percentage=e;let t=this.$refs.audio;console.log(t.duration);let a=e*t.duration/100;t.currentTime=a;let i=Math.floor(a/60)+"",n=Math.floor(a%60)+"";i=i.length>=2?i:"0"+i,n=n.length>=2?n:"0"+n,this.currentTime=i+":"+n},play(){this.playFlag=!this.playFlag;let e=this.$refs.audio;this.playFlag?e.play():e.pause()},switchAudio(e){let t=this.audioList;if(console.log(this.index,t),"prev"==e){if(0==this.index)return!1;this.index--,this.playFlag=!0;let e=t[this.index].id;this.getDetail(e)}else if("next"==e){if(this.index==t.length-1)return!1;this.index++,this.playFlag=!0;let e=t[this.index].id;this.getDetail(e)}},audioEnd(){let e=this.audioList;if(this.index==e.length-1)return!1;this.index++,this.playFlag=!0;let t=e[this.index].id;this.getDetail(t)}}});const q=(0,L.Z)(N,[["render",x],["__scopeId","data-v-5a9225b9"]]);var V=q}}]);
//# sourceMappingURL=about.d933eb05.js.map